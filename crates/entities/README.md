# plastmem_entities

Sea-ORM entities for database tables.

## Overview

This crate contains the database schema definitions as Sea-ORM entities.
All code is generated by `sea-orm-cli` and should not be manually edited.

## Entities

### episodic_memory

Stores episodic memories with FSRS parameters:

```rust
pub struct Model {
    pub id: Uuid,
    pub conversation_id: Uuid,
    pub messages: Json,           // Vec<Message> as JSON
    pub title: String,
    pub summary: String,
    pub embedding: PgVector,      // pgvector extension
    pub stability: f32,           // FSRS stability
    pub difficulty: f32,          // FSRS difficulty
    pub surprise: f32,            // Creation-time surprise signal
    pub start_at: DateTimeWithTimeZone,
    pub end_at: DateTimeWithTimeZone,
    pub created_at: DateTimeWithTimeZone,
    pub last_reviewed_at: DateTimeWithTimeZone,
}
```

### message_queue

Per-conversation message buffer and state:

```rust
pub struct Model {
    pub id: Uuid,                 // conversation_id
    pub messages: Json,           // Vec<Message> as JSON
    pub pending_reviews: Option<Json>, // Vec<PendingReview>
    pub event_model: Option<String>,   // Current event description
    pub last_embedding: Option<PgVector>,
    pub event_model_embedding: Option<PgVector>,
}
```

## Regenerating Entities

After schema changes, regenerate with:

```bash
cd crates/entities
sea-orm-cli generate entity \
  --url "postgres://user:pass@localhost/plastmem" \
  --output-dir src
```

## Note

Do not manually edit the entity files. All changes should go through
migrations in the `migration` crate, then regenerate entities.
